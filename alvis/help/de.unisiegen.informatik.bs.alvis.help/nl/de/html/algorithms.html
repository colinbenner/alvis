<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Creating algorithms</title>
</head>

<body>
<h1>Creating algorithms</h1>
<h2>Introduction</h2>
The alvis programming language's syntax is inspired by several programming languages and the pseudo code syntax used in <q>Introduction to Algorithms</q> by Cormen, Leiserson, Rivest and Stein.

A <q>hello world</q> program could look like this:<br>
<pre>
/*
 * The main function.
 */
main() {
	// print using Java's System.out.println() method
	print("Hello, ");
	print("world!"),
}
</pre>

What you can see are the two types of comments available: from <code>/*</code> to <code>*/</code> for multiple line comments and <code>//</code> as the start for a comment to the end of the line.

Every algorithm needs to have a <code>main</code> function. That function is the one called when you run the algorithm. It corresponds to the <code>main</code> function in C , C++, C#, Java, etc.


<h2>Identifiers</h2>
Identifiers are character strings that start with an upper case or lower case ASCII letter (i.e. <q>A</q>,<q>B</q>,<q>C</q>,&hellip;,<q>Z</q> or <q>a</q>,<q>b</q>,<q>c</q>,&hellip;,<q>z</q>) or an underscore (i.e. <q>_</q>.
That initial character can be followed by any combination of ASCII letters, underscores and the digits <q>0</q>,<q>1</q><q>2</q>,&hellip;,<q>9</q>.

<h2>Constants</h2>
The available constanst are
<ul>
	<li>Integer constants: sequences of digits <q>0</q> through <q>9</q>
	For instance:<br><q>1</q>, <q>23</q>, <q>623843824</q>, <q>1234567890</q>, <q>42</q></li>
	<li>Floting point constants: sequences of digits <q>0</q> through <q>9</q> followed by a dot (<q>.</q>) followed by an arbitrarily long string of digits. For instance:<br>
	<q>3.</q>, <q>2.71828</q>, <q>0.1234567890876543</q></li>
	<li>String constants which are arbitrarily long sequences of ASCII characters except backslash and <q>"</q> plus a few escape sequences starting with a backslash:
	<ul>
		<li>The backspace character <q>\b</q></li>
		<li>The tabulator character <q>\t</q></li>
		<li>The new line character <q>\n</q></li>
		<li>The formfeed character <q>\f</q></li>
		<li>The carriage return character <q>\r</q></li>
		<li>The single quotation mark character <q>'</q>: <q>\'</q></li>
		<li>The double quotation mark character <q>"</q>: <q>\"</q></li>
		<li>The backslash character <q>\</q>: <q>\\</q></li>
	</ul>
	For instance: "abc", "", "a\"bcd\"efg\n"</li>
	<li><q>null</q> which is a placeholder value for every type</li>
	<li>The infinity symbol: The result of the division <q>1/0</q> which is positive infinity, would be written <q>infty</q> in the algorithm language.</li>
</ul>


<h2>Expressions</h2>
<p>Exrpessions can be
<ul>
	<li>a constant.</li>
	<li>of the form <q>expression op expression</q> where <q>op</q> is one of the operators
		<q>+</q>, <q>-</q>, <q>*</q>, <q>/</q>, <q>%</q>, <q>&lt;</q>, <q>&gt;</q>, <q>&lt;=</q>, <q>&gt;=</q>, <q>==</q>, <q>!=</q>, <q>||</q>, <q>&amp;&amp;</q>.</li>
	<li>of the form <q>(+ expression)</q>, <q>(- expression)</q> or <q>! expression</q>.</li>
	<li>of the form <q>(expression)</q>.</li>
	<li>of the form <q>prefixExpression</li>
</ul>
Nothing except what can be generated from the above is an expression. </p>

<p> Postfix expressions are defined as
<ul>
	<li><q>identifier</q></li>
	<li><q>postfixExpression.identifier</q></li>
	<li><q>postfixExpression(argumentList)</q></li>
	<li><q>postfixExpressino[expression]</q>.</li>
</ul>
Nothing other than the expressions generated by the cases specified is a postfix expression.</p>



<h2>Types</h2>
Types are either simple types like <q>Integer</q>, <q>Float</q>, <q>String</q> or <q>Void</q>, complex types like <q>Integer List</q> which describes a list of integers or an array type like
<q>Integer[]</q>, or <q>Float[][][]</q> which is an array of Integers in the first case and an array of arrays of arrays of floats in the second case.

<p>Simple types and complex types can be subtypes or supertypes of other simple types and complex types.
Whenever you can use an expression of type A you can also use an expression of type B if B is a subtype of a.</p>
<p>If B is derived from A using inheritance we call B a subtype of A and A a supertype of B.
We also use both terms if A and B are equal.<br>
If A and B are not equal we call B a proper subtype of A and A a proper supertype of B.
</p>



<h2>Statement terminators</h2>
<p>Note the two different end-of-statement signs <q>;</q> and <q>,</q> in the code above.
<q>,</q> is the usual statement termination character. <q>;</q> is used to insert a breakpoint after that statement.
This is used to define at which points in the algorithm's execution it will stop and show the user what the system looks like at that point.</p>

In the following documentation I will always use <q>,</q> as the termination symbol to mean any termination symbol.
In every case where you can write a comma, you can replace it with a semicolon.


<h2>Statements</h2>
<ul>
	<li>A declaration is a statement.</li>
	<li>An assignment is a statement.</li>
	<li>A return-statement is a statement.</li>
	<li>A function or method call is a statement.</li>
	<li>Every block is a statement.</li>
	<li>An if-statement is a statement.</li>
	<li>A for-loop is a statement.</li>
	<li>A while-loop is a statement.</li>
</ul>
Nothing other than the above is a statement.


<h2>Declarations</h2>
A declaration always has the form it also has in C or Java:
<pre>
T id,
</pre>
or it can be combined with an assignment like
<pre>
T id = expr,
</pre>
where <q>T</q> is a type, <q>id</q> is an identifier and <q>expr</q> is an expression of a subtype of <q>T</q>.


<h2>Assignments</h2>
Simple assignments have the same syntax they have in C or Java:
<pre>
a = 3,
</pre>
where <code>a</code> is a variable defined in the current scope.
The types of the left hand side and the right hand side of an assignment have to agree, that is the type of the variable on the left has to be a supertype of the type on the right hand side.

<p>It is, however, not possible to compile code like
<pre>
a = b = 3,
</pre>
because in the algorithm language an assignment is a statement but not an expression and the right hand side of an assignment has to be an expression.
</p>

As mention above, it is possible to combine declaration and assignment.


<h2>Return statements</h2>
<p>A return statement has the same form as in C or Java:
<pre>
return,
</pre>
in a function that returns no value or
<pre>
return expr,
</pre>
in a function that does return a value, specifically one of the same type as expression.
The type of <q>expr</q> has to be a subtype of the return type of the function that return statement is part of.</p>

<p>Note that a semicolon as a terminator following a return statement is silently ignored.
That is because the breakpoint would have to be after the return occured in which case the path of execution is at a competely different place, because the function can be called from multiple places there can also be multiple locations at which the execution continues.
If you want to use a breakpoint after a return statement, place the semicolon after the call to the function that includes this return statement.</p>


<h2>Blocks</h2>
There are two ways of writing blocks in the algorithm language.
You can write them either in C/Java style, i.e. enclosed in <q>{</q> and <q>}</q> or in Pascal style, i.e. enclosed in <q>begin</q> and <q>end</q>.


<h2>If statements</h2>
<p>The if statements have two general forms:
<pre>
if condition:
	then_block
</pre>
and
<pre>
if condition:
	then_block
else
	else_block
</pre>
where <q>then_block</q> and <q>else_block</q> are either blocks or single statement and <q>condition</q> is a expression which has a type that is a subtype of Boolean.</p>

<p>Note that there is an ambiguity in code like
<pre>
if condition1:
if condition2:
	then_block
else
	else_block
</pre>
It is not immediatly clear, which <q>if</q> the <q>else</q> belongs to. In this case the compiler assumes you meant
<pre>
if condition1: {
	if condition2:
		then_block
	else
		else_block
}
</pre>
i.e. when in doubt the <q>else</q> block always belongs to the last <q>if</q> statement preceeding it that does not already have an <q>else</q> statement.
(This is the same way the conflict is resolved in C and Java.)</p>



<h2>Loops</h2>
<p>There are two different loops in the pseudo code language. There is a <code>for</code> loop which some would rather call a foreach loop<br>
<pre>
for Type id in someArray:
	block
</pre>
where <code>Type</code> is a type name, <code>id</code> is an identifier, <code>someArray</code> is some array-valued expression with elements which have a subtype of <code>Type</code> as their type and <code>block</code> is either a block or a single statement followed by a statement terminator.
What this loop does is that it iterates over all the elements in someArray storing the current element in <code>id</code>.
The scope within which <code>id</code> can be used is <code>block</code>, that is after the flow of execution leaves the loop, <code>id</code> will not be defined any more unless it was defined before the loop.
In that case <code>id</code> will have the same value it had before entering the loop.</p>


<p>The other loop is a <code>while</code> loop. The syntax is the following:<br>
<pre>
while condition:
	block
</pre>
where <code>condition</code> is an expression of a subtype of Boolean and <code>block</code> is either a block or a single expression.


</body>
</html>
